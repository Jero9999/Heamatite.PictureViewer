@model SlideshowModel
@{
	ViewData["Title"] = "";
	var currentPosition = Model.Position;
}
<div>
	<div id="slideshowRoot" class="swiper-container">
		<div class="swiper-wrapper">
			@*@foreach (var position in imgPositions)
			{
				var isCurrent = position == currentPosition ? "current" : "hidden";
				<div class="swiper-slide">
					<img src="~/Slideshow/Image?position=@position" class="" data-position="@position" style="max-width:100%;max-height:100%;" />
				</div>
			}*@
		</div>
	</div>
</div>

@section Stylesheets{
	<link rel="stylesheet" type="text/css" href="~/local_lib/swiper-4.0.7/dist/css/swiper.min.css" />

	<style>
		html, body {
			position: relative;
			height: 100%;
		}

		body {
			background: #eee;
			font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
			font-size: 14px;
			color: #000;
			margin: 0;
			padding: 0;
		}

		.swiper-container {
			position:absolute;
			top:0px;
			bottom:0px;
			width: 100%;
			height: 100%;
		}

		.swiper-slide {
			text-align: center;
			font-size: 18px;
			background: #000;
			/* Center slide text vertically */
			display: -webkit-box;
			display: -ms-flexbox;
			display: -webkit-flex;
			display: flex;
			-webkit-box-pack: center;
			-ms-flex-pack: center;
			-webkit-justify-content: center;
			justify-content: center;
			-webkit-box-align: center;
			-ms-flex-align: center;
			-webkit-align-items: center;
			align-items: center;
		}
	</style>
}

@section Scripts{
	<script type="text/javascript" src="~/local_lib/swiper-4.0.7/dist/js/swiper.min.js"></script>
	<script type="text/javascript">
		$(function () {
			var currentFolder= '@Model.CurrentFolder';
			var swiper = new Swiper('.swiper-container',
				{
					virtual: {
						renderSlide: function (slide, index) {
							return '<div class="swiper-slide">' +
						'<img src="Image?position='+slide+'&currentFolder='+currentFolder+'" style="max-width:100%;max-height:100%;" />' +
						'</div>'

						}
					}
				});
			swiper.on('reachEnd', function () {
				var lastIndex = swiper.virtual.slides[swiper.virtual.slides.length - 1];
				swiper.virtual.appendSlide(lastIndex + 1);
			});
			swiper.on('reachBeginning', function () {
				var firstIndex = swiper.virtual.slides[0];
				swiper.virtual.prependSlide(firstIndex - 1);
			});
				
			for (var i = 0; i < 10; i++) {
				swiper.virtual.appendSlide(i);
			}

		})
	</script>

}